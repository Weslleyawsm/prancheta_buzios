<!DOCTYPE html>
<html>
<head>
    <title>Ponto dos Motoristas - Cadastro de Sa√≠da</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }

        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            align-items: start;
        }

        .form-container {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            text-align: center;
            position: sticky;
            top: 20px;
        }

        .tabelas-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .logo {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .titulo {
            font-size: 32px;
            font-weight: bold;
            color: #2c5aa0;
            margin-bottom: 10px;
        }

        .subtitulo {
            font-size: 18px;
            color: #666;
            margin-bottom: 40px;
        }

        .form-inner {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 3px solid #e9ecef;
        }

        .campo-group {
            margin-bottom: 25px;
            text-align: left;
        }

        .campo-group label {
            display: block;
            font-size: 18px;
            font-weight: bold;
            color: #495057;
            margin-bottom: 8px;
        }

        .campo-group input, .campo-group select {
            width: 100%;
            padding: 15px;
            font-size: 20px;
            border: 3px solid #ced4da;
            border-radius: 10px;
            transition: all 0.3s;
            background: white;
        }

        .campo-group input:focus, .campo-group select:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.25);
        }

        .btn-cadastrar {
            width: 100%;
            padding: 20px;
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }

        .btn-cadastrar:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(40,167,69,0.4);
        }

        .btn-cadastrar:active {
            transform: translateY(0);
        }

        .status {
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
        }

        .sucesso {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .erro {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }

        .ultima-acao {
            background: rgba(255,255,255,0.8);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #007bff;
        }

        .ultima-acao h4 {
            margin-bottom: 10px;
            color: #007bff;
        }

        /* Cron√¥metros */
        .cronometros-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .cronometro-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border: 2px solid #e9ecef;
        }

        .cronometro-vila-verde .cronometro-header {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .cronometro-rasa .cronometro-header {
            background: linear-gradient(135deg, #007bff, #6610f2);
        }

        .cronometro-header {
            padding: 15px 20px;
            color: white;
            text-align: center;
        }

        .cronometro-header h3 {
            margin: 0;
            font-size: 1.2em;
        }

        .cronometro-header p {
            margin: 5px 0 0 0;
            font-size: 0.9em;
            opacity: 0.9;
        }

        .cronometro-display {
            padding: 25px 20px;
            text-align: center;
            color: #333;
        }

        .cronometro-display .tempo {
            font-size: 2.5em;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 10px;
            font-family: 'Courier New', monospace;
        }

        .cronometro-display .info-proximo {
            color: #666;
            font-size: 0.9em;
            line-height: 1.4;
        }

        /* Estilos das Tabelas de Sa√≠da */
        .linha-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border: 2px solid #e9ecef;
        }

        .linha-header {
            padding: 20px;
            color: white;
            font-weight: bold;
            text-align: center;
            position: relative;
        }

        .linha-vila-verde .linha-header {
            background: linear-gradient(135deg, #28a745, #20c997);
        }

        .linha-rasa .linha-header {
            background: linear-gradient(135deg, #007bff, #6610f2);
        }

        .linha-header h3 {
            margin: 0;
            font-size: 1.3em;
        }

        .linha-header .info {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
        }

        .carros-lista {
            max-height: 500px;
            overflow-y: auto;
        }

        .carro-item {
            padding: 15px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s;
            color: #333;
        }

        .carro-item:hover {
            background-color: #f8f9fa;
        }

        .carro-item:last-child {
            border-bottom: none;
        }

        .carro-info {
            flex: 1;
        }

        .carro-numero {
            font-weight: bold;
            font-size: 1.1em;
            color: #333;
        }

        .carro-motorista {
            color: #666;
            font-size: 0.9em;
        }

        .carro-horario {
            font-weight: bold;
            color: #007bff;
            font-size: 1em;
        }

        .carro-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-aguardando {
            background: #fff3cd;
            color: #856404;
        }

        .status-saiu {
            background: #d4edda;
            color: #155724;
        }

        .tabelas-titulo {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .tabelas-titulo h2 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .tabelas-titulo p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .tabelas-container {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
                padding: 10px;
            }

            .cronometros-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .tabelas-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .form-container {
                padding: 20px;
                position: relative;
            }

            .titulo {
                font-size: 24px;
            }

            .campo-group input {
                font-size: 18px;
                padding: 12px;
            }

            .btn-cadastrar {
                font-size: 20px;
                padding: 15px;
            }

            .tabelas-titulo h2 {
                font-size: 2em;
            }
        }

        /* Anima√ß√£o de carregamento */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Formul√°rio de Cadastro -->
        <div class="form-container">
            <div class="logo">üöå</div>
            <h1 class="titulo">PONTO DOS MOTORISTAS</h1>
            <p class="subtitulo">Cadastre sua sa√≠da aqui</p>

            <div class="form-inner">
                <form id="formMotorista">
                    <div class="campo-group">
                        <label for="numero">üöó N√∫mero do Carro</label>
                        <input type="text" id="numero" name="numero" placeholder="Ex: 101" required autocomplete="off">
                    </div>

                    <div class="campo-group">
                        <label for="motorista">üë®‚Äçüíº Seu Nome Completo</label>
                        <input type="text" id="motorista" name="motorista" placeholder="Ex: Jo√£o Silva" required autocomplete="off">
                    </div>

                    <div class="campo-group">
                        <label for="linha">üõ£Ô∏è Linha que Vai Fazer</label>
                        <select id="linha" name="linha" required>
                            <option value="">Selecione a linha</option>
                            <option value="Centro x Vila Verde">Centro x Vila Verde</option>
                            <option value="Centro x Rasa">Centro x Rasa</option>
                        </select>
                    </div>

                    <button type="submit" class="btn-cadastrar" id="btnCadastrar">
                        ‚úÖ CADASTRAR SA√çDA
                    </button>
                </form>
            </div>

            <div id="status"></div>

            <div id="ultimaAcao" class="ultima-acao" style="display: none;">
                <h4>‚úÖ √öltimo Cadastro Realizado:</h4>
                <p id="ultimoCarroInfo">--</p>
            </div>
        </div>

        <!-- Tabelas de Sa√≠da -->
        <div class="tabelas-section">
            <div class="tabelas-titulo">
                <h2>üìã Sa√≠das do Dia</h2>
                <p>Acompanhe os hor√°rios de sa√≠da por linha</p>
            </div>

            <!-- Cron√¥metros -->
            <div class="cronometros-container">
                <div class="cronometro-card cronometro-vila-verde">
                    <div class="cronometro-header">
                        <h3>üü¢ Centro x Vila Verde</h3>
                        <p>‚è∞ Cron√¥metro Autom√°tico</p>
                    </div>
                    <div class="cronometro-display" id="cronometro-vila-verde">
                        <div class="tempo">--:--</div>
                        <div class="info-proximo" id="proximo-vila-verde">Aguardando pr√≥ximo carro...</div>
                    </div>
                </div>

                <div class="cronometro-card cronometro-rasa">
                    <div class="cronometro-header">
                        <h3>üîµ Centro x Rasa</h3>
                        <p>‚è∞ Cron√¥metro Autom√°tico</p>
                    </div>
                    <div class="cronometro-display" id="cronometro-rasa">
                        <div class="tempo">--:--</div>
                        <div class="info-proximo" id="proximo-rasa">Aguardando pr√≥ximo carro...</div>
                    </div>
                </div>
            </div>

            <div class="tabelas-container">
                <div class="linha-container linha-vila-verde">
                    <div class="linha-header">
                        <h3>üü¢ Centro x Vila Verde</h3>
                        <div class="info">
                            <span id="total-vila-verde">0 carros</span> ‚Ä¢
                            <span id="intervalo-info-vila-verde">-- min</span>
                        </div>
                    </div>
                    <div class="carros-lista" id="carros-vila-verde">
                        <div class="carro-item" style="text-align: center; color: #666; padding: 40px;">
                            Nenhum carro cadastrado ainda
                        </div>
                    </div>
                </div>

                <div class="linha-container linha-rasa">
                    <div class="linha-header">
                        <h3>üîµ Centro x Rasa</h3>
                        <div class="info">
                            <span id="total-rasa">0 carros</span> ‚Ä¢
                            <span id="intervalo-info-rasa">-- min</span>
                        </div>
                    </div>
                    <div class="carros-lista" id="carros-rasa">
                        <div class="carro-item" style="text-align: center; color: #666; padding: 40px;">
                            Nenhum carro cadastrado ainda
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Vari√°veis globais para cron√¥metros
        const cronometros = {
            'Centro x Vila Verde': {
                intervalo: null,
                proximoCarro: null,
                horarioProximoCarro: null,
                horarioProximoCarroOriginal: null,
                tempoRestante: 0,
                ativo: false
            },
            'Centro x Rasa': {
                intervalo: null,
                proximoCarro: null,
                horarioProximoCarro: null,
                horarioProximoCarroOriginal: null,
                tempoRestante: 0,
                ativo: false
            }
        };

        let intervalosLinha = {
            'Centro x Vila Verde': 8,
            'Centro x Rasa': 8
        };

        // Auto-foco no primeiro campo
        document.getElementById('numero').focus();

        // Atualizar tabelas e cron√¥metros a cada 10 segundos
        setInterval(() => {
            atualizarTabelas();
            carregarIntervalosLinhas();
        }, 10000);

        // Carregar na inicializa√ß√£o
        atualizarTabelas();
        carregarIntervalosLinhas();

        // üÜï AUTO-REFRESH - Atualiza a cada 5 segundos
        setInterval(async () => {
            if (!document.hidden) { // S√≥ atualiza se aba estiver ativa
                try {
                    console.log('üîÑ Atualizando painel do motorista...');
                    await atualizarTabelas();
                    await carregarIntervalosLinhas();
                } catch (error) {
                    console.error('Erro ao atualizar painel do motorista:', error);
                }
            }
        }, 5000); // 5 segundos

        // Carregar intervalos das linhas
        async function carregarIntervalosLinhas() {
            try {
                const response = await fetch('/listar-intervalos-linhas');
                const data = await response.json();

                if (data.status === 'ok') {
                    intervalosLinha = data.intervalos;
                }
            } catch (error) {
                console.error('Erro ao carregar intervalos:', error);
            }
        }

        // Fun√ß√£o para calcular tempo restante at√© hor√°rio
        function calcularTempoRestante(horarioSaida) {
            const agora = new Date();
            const [horas, minutos] = horarioSaida.split(':').map(Number);
            const horarioSaidaObj = new Date();
            horarioSaidaObj.setHours(horas, minutos, 0, 0);

            // Se o hor√°rio j√° passou hoje, considerar para amanh√£
            if (horarioSaidaObj <= agora) {
                horarioSaidaObj.setDate(horarioSaidaObj.getDate() + 1);
            }

            return Math.max(0, Math.floor((horarioSaidaObj - agora) / 1000));
        }

        // Iniciar cron√¥metro autom√°tico
        function iniciarCronometroAutomatico(linha, numeroCarro, horarioSaida) {
            const cronometro = cronometros[linha];

            if (cronometro.intervalo) {
                clearInterval(cronometro.intervalo);
            }

            cronometro.proximoCarro = numeroCarro;
            cronometro.horarioProximoCarro = horarioSaida;
            cronometro.horarioProximoCarroOriginal = horarioSaida;
            cronometro.tempoRestante = calcularTempoRestante(horarioSaida);
            cronometro.ativo = true;

            cronometro.intervalo = setInterval(() => {
                cronometro.tempoRestante = calcularTempoRestante(cronometro.horarioProximoCarroOriginal);

                if (cronometro.tempoRestante <= 0) {
                    // Iniciar contagem regressiva baseada no intervalo
                    const intervaloMinutos = intervalosLinha[linha] || 8;
                    iniciarContagemRegressiva(linha, intervaloMinutos);
                }

                atualizarDisplayCronometro(linha);
            }, 1000);

            atualizarDisplayCronometro(linha);
        }

        // Iniciar contagem regressiva
        function iniciarContagemRegressiva(linha, intervaloMinutos) {
            const cronometro = cronometros[linha];

            if (cronometro.intervalo) {
                clearInterval(cronometro.intervalo);
            }

            cronometro.tempoRestante = intervaloMinutos * 60;
            cronometro.ativo = true;

            cronometro.intervalo = setInterval(() => {
                if (cronometro.tempoRestante > 0) {
                    cronometro.tempoRestante--;
                } else {
                    // Tempo esgotado, aguardar pr√≥ximo carro
                    pararCronometro(linha);
                    setTimeout(() => {
                        atualizarTabelas();
                    }, 1000);
                }
                atualizarDisplayCronometro(linha);
            }, 1000);

            // Atualizar informa√ß√£o do pr√≥ximo carro durante contagem regressiva
            cronometro.proximoCarro = `Intervalo ${intervaloMinutos}min`;
            cronometro.horarioProximoCarro = 'Contagem regressiva';
            atualizarDisplayCronometro(linha);
        }

        // Parar cron√¥metro
        function pararCronometro(linha) {
            const cronometro = cronometros[linha];
            if (cronometro.intervalo) {
                clearInterval(cronometro.intervalo);
                cronometro.intervalo = null;
            }
            cronometro.ativo = false;
        }

        // Atualizar display do cron√¥metro
        function atualizarDisplayCronometro(linha) {
            const cronometro = cronometros[linha];
            const containerId = linha === 'Centro x Vila Verde' ? 'cronometro-vila-verde' : 'cronometro-rasa';
            const proximoId = linha === 'Centro x Vila Verde' ? 'proximo-vila-verde' : 'proximo-rasa';

            const container = document.getElementById(containerId);
            const proximoDiv = document.getElementById(proximoId);

            if (!container || !proximoDiv) return;

            // Atualizar tempo
            const tempoDisplay = container.querySelector('.tempo');
            const minutos = Math.floor(cronometro.tempoRestante / 60);
            const segundos = cronometro.tempoRestante % 60;
            tempoDisplay.textContent = `${String(minutos).padStart(2, '0')}:${String(segundos).padStart(2, '0')}`;

            // Mudar cor baseado no tempo restante
            if (cronometro.tempoRestante <= 60) {
                tempoDisplay.style.color = '#dc3545'; // Vermelho
            } else if (cronometro.tempoRestante <= 300) {
                tempoDisplay.style.color = '#ffc107'; // Amarelo
            } else {
                tempoDisplay.style.color = '#28a745'; // Verde
            }

            // Atualizar informa√ß√£o do pr√≥ximo carro
            if (cronometro.proximoCarro && cronometro.horarioProximoCarro) {
                if (cronometro.horarioProximoCarro === 'Contagem regressiva') {
                    proximoDiv.textContent = `Intervalo em andamento - ${cronometro.proximoCarro}`;
                } else {
                    proximoDiv.textContent = `Pr√≥ximo: Carro ${cronometro.proximoCarro} - Sa√≠da ${cronometro.horarioProximoCarro}`;
                }
            } else {
                proximoDiv.textContent = 'Aguardando pr√≥ximo carro...';
            }
        }

        // Atualizar pr√≥ximos carros nos cron√¥metros
        function atualizarProximosCarros(carrosPorLinha) {
            Object.keys(carrosPorLinha).forEach(linha => {
                const carrosLinha = carrosPorLinha[linha];
                const cronometroAtual = cronometros[linha];

                if (carrosLinha && carrosLinha.carros.length > 0) {
                    const proximoCarro = carrosLinha.carros.find(carro => carro.status === 'AGUARDANDO');

                    if (proximoCarro) {
                        // Verificar se √© o mesmo carro que j√° estava no cron√¥metro
                        if (cronometroAtual.proximoCarro === proximoCarro.numero &&
                            cronometroAtual.horarioProximoCarro === proximoCarro.horario) {
                            return;
                        }

                        // √â um carro diferente, iniciar novo cron√¥metro
                        iniciarCronometroAutomatico(linha, proximoCarro.numero, proximoCarro.horario);
                    } else {
                        // Todos sa√≠ram, parar cron√¥metro
                        pararCronometro(linha);
                        cronometros[linha].proximoCarro = null;
                        atualizarDisplayCronometro(linha);
                    }
                } else {
                    // Nenhum carro na linha, parar cron√¥metro
                    pararCronometro(linha);
                    cronometros[linha].proximoCarro = null;
                    atualizarDisplayCronometro(linha);
                }
            });
        }
        // Auto-foco no primeiro campo
        document.getElementById('numero').focus();

        // Atualizar tabelas a cada 10 segundos
        setInterval(atualizarTabelas, 10000);

        // Carregar tabelas na inicializa√ß√£o
        atualizarTabelas();

        // Configurar formul√°rio
        document.getElementById('formMotorista').addEventListener('submit', async function(e) {
            e.preventDefault();

            const btnCadastrar = document.getElementById('btnCadastrar');
            const statusDiv = document.getElementById('status');

            // Mostrar loading
            btnCadastrar.innerHTML = '‚è≥ CADASTRANDO... <span class="loading"></span>';
            btnCadastrar.disabled = true;

            const formData = new FormData(e.target);
            const dados = new URLSearchParams(formData);

            try {
                const response = await fetch('/adicionar-motorista', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: dados
                });

                const resultado = await response.json();

                if (resultado.status === 'ok') {
                    // Sucesso
                    statusDiv.innerHTML = `
                        <div class="status sucesso">
                            ‚úÖ ${resultado.mensagem}
                        </div>
                    `;

                    // Mostrar √∫ltimo cadastro
                    const ultimaAcaoDiv = document.getElementById('ultimaAcao');
                    const ultimoCarroInfo = document.getElementById('ultimoCarroInfo');

                    ultimoCarroInfo.innerHTML = `
                        <strong>Carro ${formData.get('numero')}</strong> - ${formData.get('motorista')}
                        <br>Linha: ${formData.get('linha')}
                    `;
                    ultimaAcaoDiv.style.display = 'block';

                    // Limpar formul√°rio
                    e.target.reset();

                    // Auto-foco no primeiro campo
                    setTimeout(() => {
                        document.getElementById('numero').focus();
                    }, 100);

                    // Atualizar tabelas imediatamente
                    atualizarTabelas();

                    // Limpar status ap√≥s 10 segundos
                    setTimeout(() => {
                        statusDiv.innerHTML = '';
                    }, 10000);

                } else {
                    // Erro
                    statusDiv.innerHTML = `
                        <div class="status erro">
                            ‚ùå ${resultado.mensagem}
                        </div>
                    `;

                    // Limpar erro ap√≥s 5 segundos
                    setTimeout(() => {
                        statusDiv.innerHTML = '';
                    }, 5000);
                }

            } catch (error) {
                statusDiv.innerHTML = `
                    <div class="status erro">
                        ‚ùå Erro de conex√£o. Tente novamente ou chame o fiscal.
                        <br><small>Erro: ${error.message}</small>
                    </div>
                `;

                // Limpar erro ap√≥s 5 segundos
                setTimeout(() => {
                    statusDiv.innerHTML = '';
                }, 5000);
            }

            // Restaurar bot√£o
            btnCadastrar.innerHTML = '‚úÖ CADASTRAR SA√çDA';
            btnCadastrar.disabled = false;
        });

        // Fun√ß√£o para atualizar as tabelas
        async function atualizarTabelas() {
            try {
                const response = await fetch('/listar-por-linha');
                const data = await response.json();

                if (data.status === 'ok') {
                    renderizarCarrosPorLinha(data.carros_por_linha);
                    atualizarProximosCarros(data.carros_por_linha);
                }
            } catch (error) {
                console.error('Erro ao atualizar tabelas:', error);
            }
        }

        function renderizarCarrosPorLinha(carrosPorLinha) {
            const linhas = ['Centro x Vila Verde', 'Centro x Rasa'];

            linhas.forEach(linha => {
                const carrosLinha = carrosPorLinha[linha] || { carros: [], total: 0, intervalo: '--' };
                const containerId = linha === 'Centro x Vila Verde' ? 'carros-vila-verde' : 'carros-rasa';
                const totalId = linha === 'Centro x Vila Verde' ? 'total-vila-verde' : 'total-rasa';
                const intervaloInfoId = linha === 'Centro x Vila Verde' ? 'intervalo-info-vila-verde' : 'intervalo-info-rasa';

                document.getElementById(totalId).textContent = `${carrosLinha.total} carros`;
                document.getElementById(intervaloInfoId).textContent = `${carrosLinha.intervalo} min`;

                const container = document.getElementById(containerId);

                if (carrosLinha.carros.length === 0) {
                    container.innerHTML = `
                        <div class="carro-item" style="text-align: center; color: #666; padding: 40px;">
                            Nenhum carro da linha ${linha} ainda
                        </div>
                    `;
                } else {
                    container.innerHTML = carrosLinha.carros.map(carro => `
                        <div class="carro-item">
                            <div class="carro-info">
                                <div class="carro-numero">üöó ${carro.numero}</div>
                                <div class="carro-motorista">üë§ ${carro.motorista}</div>
                                <div class="carro-horario">üïê ${carro.horario}</div>
                            </div>
                            <div class="carro-status ${carro.status === 'SAIU' ? 'status-saiu' : 'status-aguardando'}">
                                ${carro.status}
                            </div>
                        </div>
                    `).join('');
                }
            });
        }

        // Limpar campos com Enter + Shift (atalho para limpar)
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.shiftKey) {
                document.getElementById('formMotorista').reset();
                document.getElementById('numero').focus();
                document.getElementById('status').innerHTML = '<div class="status info">üóëÔ∏è Campos limpos!</div>';
                setTimeout(() => {
                    document.getElementById('status').innerHTML = '';
                }, 2000);
            }

            // F5 para atualizar tabelas
            if (e.key === 'F5') {
                e.preventDefault();
                atualizarTabelas();
                document.getElementById('status').innerHTML = '<div class="status info">üîÑ Tabelas atualizadas!</div>';
                setTimeout(() => {
                    document.getElementById('status').innerHTML = '';
                }, 2000);
            }
        });

        // Converter inputs para mai√∫sculo automaticamente
        document.getElementById('numero').addEventListener('input', function(e) {
            e.target.value = e.target.value.toUpperCase();
        });

        // Converter nome para formato adequado (primeira letra mai√∫scula)
        document.getElementById('motorista').addEventListener('input', function(e) {
            const words = e.target.value.toLowerCase().split(' ');
            const formattedWords = words.map(word => {
                if (word.length > 0) {
                    return word.charAt(0).toUpperCase() + word.slice(1);
                }
                return word;
            });
            e.target.value = formattedWords.join(' ');
        });

        // Avisos visuais quando campos est√£o sendo preenchidos
        const inputs = document.querySelectorAll('input, select');
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.style.borderColor = '#007bff';
                this.style.transform = 'scale(1.02)';
            });

            input.addEventListener('blur', function() {
                this.style.borderColor = '#ced4da';
                this.style.transform = 'scale(1)';
            });
        });

        console.log('üöå Painel dos Motoristas carregado com tabelas e AUTO-REFRESH!');
        console.log('üí° Dica: Shift + Enter para limpar campos');
        console.log('üí° F5 para atualizar tabelas manualmente');
        console.log('üîÑ Auto-refresh ativo: atualiza a cada 5 segundos');
    </script>
</body>
</html>